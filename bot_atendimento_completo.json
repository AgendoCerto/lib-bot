{
  "schema": "flowkit/1.0",
  "version": {
    "id": "1.0",
    "status": "development"
  },
  "entries": [
    {
      "kind": "global_start",
      "target": "boas_vindas_hsm"
    }
  ],
  "bot": {
    "id": "atendimento-clinica",
    "channels": ["whatsapp"]
  },
  "props": {
    "clinica_nome": "ClÃ­nica SaÃºde & Bem-Estar",
    "horario_funcionamento": "Segunda a Sexta: 8h Ã s 18h",
    "telefone_emergencia": "+55 11 9999-9999"
  },
  "graph": {
    "nodes": [
      {
        "id": "boas_vindas_hsm",
        "kind": "message",
        "title": "Boas-vindas HSM",
        "props": {
          "hsm": {
            "name": "welcome_clinic_template"
          }
        },
        "x": 100,
        "y": 100
      },
      {
        "id": "apresentacao_imagem",
        "kind": "media",
        "title": "Imagem da ClÃ­nica",
        "props": {
          "type": "image",
          "url": "https://example.com/images/clinica-fachada.jpg",
          "caption": "Bem-vindo Ã  {{props.clinica_nome}}! ğŸ¥\n\nEstamos aqui para cuidar da sua saÃºde com excelÃªncia."
        },
        "x": 100,
        "y": 200
      },
      {
        "id": "menu_principal",
        "kind": "buttons",
        "title": "Menu Principal",
        "props": {
          "text": "OlÃ¡ {{user.name | default: 'paciente'}}! ğŸ‘‹\n\nComo posso ajudÃ¡-lo hoje?\n\nğŸ“‹ Escolha uma das opÃ§Ãµes abaixo:",
          "buttons": [
            {
              "label": "ğŸ“… Agendar consulta",
              "payload": "agendar",
              "kind": "reply"
            },
            {
              "label": "ğŸ“‹ Meus agendamentos",
              "payload": "agendamentos",
              "kind": "reply"
            },
            {
              "label": "ğŸ›ï¸ Nossos planos",
              "payload": "planos",
              "kind": "reply"
            },
            {
              "label": "â„¹ï¸ InformaÃ§Ãµes",
              "payload": "informacoes",
              "kind": "reply"
            }
          ]
        },
        "x": 100,
        "y": 300
      },
      {
        "id": "especialidades_lista",
        "kind": "listpicker",
        "title": "Lista de Especialidades",
        "props": {
          "text": "ğŸ“‹ Selecione a especialidade para agendar sua consulta:",
          "button_text": "Ver especialidades",
          "sections": [
            {
              "title": "ğŸ©º ClÃ­nica Geral",
              "items": [
                {
                  "id": "clinico_geral",
                  "title": "ClÃ­nico Geral",
                  "description": "Consulta geral - 30 min"
                },
                {
                  "id": "checkup",
                  "title": "Check-up Completo", 
                  "description": "AvaliaÃ§Ã£o completa - 60 min"
                }
              ]
            },
            {
              "title": "ğŸ¦· Especialidades",
              "items": [
                {
                  "id": "cardiologia",
                  "title": "Cardiologia",
                  "description": "Dr. JoÃ£o Silva - 45 min"
                },
                {
                  "id": "dermatologia",
                  "title": "Dermatologia", 
                  "description": "Dra. Maria Santos - 30 min"
                },
                {
                  "id": "ortopedia",
                  "title": "Ortopedia",
                  "description": "Dr. Pedro Costa - 40 min"
                }
              ]
            }
          ]
        },
        "x": 400,
        "y": 300
      },
      {
        "id": "agendamento_confirmacao",
        "kind": "confirm",
        "title": "ConfirmaÃ§Ã£o de Agendamento",
        "props": {
          "title": "ğŸ“… Confirmar agendamento?\n\nğŸ©º Especialidade: {{flow.especialidade_selecionada}}\nğŸ“… Data: {{flow.data_selecionada}}\nğŸ• HorÃ¡rio: {{flow.horario_selecionado}}\nğŸ’° Valor: R$ {{flow.valor_consulta}}",
          "yes": "âœ… Confirmar",
          "no": "âŒ Cancelar"
        },
        "x": 700,
        "y": 300
      },
      {
        "id": "comprovante_documento",
        "kind": "media",
        "title": "Envio de Comprovante",
        "props": {
          "type": "document",
          "url": "https://example.com/docs/comprovante-agendamento.pdf",
          "caption": "ğŸ“„ Aqui estÃ¡ seu comprovante de agendamento!\n\nâœ… Agendamento confirmado para {{flow.data_selecionada}} Ã s {{flow.horario_selecionado}}",
          "filename": "comprovante-agendamento-{{user.id}}.pdf"
        },
        "x": 1000,
        "y": 300
      },
      {
        "id": "carousel_planos",
        "kind": "carousel",
        "title": "Carrossel de Planos",
        "props": {
          "text": "ğŸ›ï¸ ConheÃ§a nossos planos e serviÃ§os especiais:",
          "cards": [
            {
              "id": "plano_basico",
              "title": "Plano BÃ¡sico",
              "description": "Consultas mensais + exames bÃ¡sicos",
              "media_url": "https://example.com/images/plano-basico.jpg",
              "price": "R$ 89,90/mÃªs",
              "buttons": [
                {
                  "label": "ğŸ’° Contratar",
                  "payload": "contratar_basico",
                  "kind": "reply"
                },
                {
                  "label": "â„¹ï¸ Saiba mais",
                  "payload": "info_basico",
                  "kind": "reply"
                }
              ]
            },
            {
              "id": "plano_premium",
              "title": "Plano Premium",
              "description": "Consultas ilimitadas + exames + especialistas",
              "media_url": "https://example.com/images/plano-premium.jpg",
              "price": "R$ 159,90/mÃªs",
              "buttons": [
                {
                  "label": "ğŸ’ Contratar",
                  "payload": "contratar_premium",
                  "kind": "reply"
                },
                {
                  "label": "ğŸ“‹ BenefÃ­cios",
                  "payload": "beneficios_premium",
                  "kind": "reply"
                }
              ]
            },
            {
              "id": "checkup_executivo",
              "title": "Check-up Executivo",
              "description": "AvaliaÃ§Ã£o completa em um sÃ³ dia",
              "media_url": "https://example.com/images/checkup-executivo.jpg",
              "price": "R$ 450,00",
              "buttons": [
                {
                  "label": "ğŸ“… Agendar",
                  "payload": "agendar_checkup",
                  "kind": "reply"
                },
                {
                  "label": "ğŸ“‹ O que inclui",
                  "payload": "detalhes_checkup",
                  "kind": "reply"
                }
              ]
            },
            {
              "id": "consulta_domicilio",
              "title": "Consulta Domiciliar",
              "description": "MÃ©dico especialista vai atÃ© vocÃª",
              "media_url": "https://example.com/images/consulta-domicilio.jpg",
              "price": "R$ 280,00",
              "buttons": [
                {
                  "label": "ğŸ  Solicitar",
                  "payload": "solicitar_domicilio",
                  "kind": "reply"
                },
                {
                  "label": "ğŸ“ Ãrea de atendimento",
                  "payload": "area_atendimento",
                  "kind": "reply"
                }
              ]
            },
            {
              "id": "telemedicina",
              "title": "Telemedicina",
              "description": "Consulta online com especialistas",
              "media_url": "https://example.com/images/telemedicina.jpg",
              "price": "R$ 80,00",
              "buttons": [
                {
                  "label": "ğŸ’» Agendar online",
                  "payload": "agendar_tele",
                  "kind": "reply"
                },
                {
                  "label": "ğŸ”§ Como funciona",
                  "payload": "como_funciona_tele",
                  "kind": "reply"
                }
              ]
            }
          ]
        },
        "x": 400,
        "y": 600
      },
      {
        "id": "meus_agendamentos",
        "kind": "message",
        "title": "Meus Agendamentos",
        "props": {
          "text": "ğŸ“‹ Seus agendamentos, {{user.name}}:\n\n{{#each user.agendamentos}}\nğŸ“… {{data}} Ã s {{horario}}\nğŸ©º {{especialidade}}\nğŸ‘¨â€âš•ï¸ {{medico}}\n{{#unless @last}}---{{/unless}}\n{{/each}}\n\nğŸ’¡ Para remarcar ou cancelar, entre em contato: {{props.telefone_emergencia}}"
        },
        "x": 400,
        "y": 700
      },
      {
        "id": "informacoes_clinica",
        "kind": "buttons",
        "title": "InformaÃ§Ãµes da ClÃ­nica", 
        "props": {
          "text": "â„¹ï¸ **{{props.clinica_nome}}**\n\nğŸ• **HorÃ¡rio de funcionamento:**\n{{props.horario_funcionamento}}\n\nğŸ“ **Contato de emergÃªncia:**\n{{props.telefone_emergencia}}\n\nğŸ“ **EndereÃ§o:**\nAv. SaÃºde, 123 - Centro\nSÃ£o Paulo - SP\n\nO que vocÃª gostaria de saber?",
          "buttons": [
            {
              "label": "ğŸ“ Como chegar",
              "payload": "localizacao",
              "kind": "reply"
            },
            {
              "label": "ğŸŒ Site da clÃ­nica",
              "kind": "url",
              "url": "https://clinicasaude.com.br"
            },
            {
              "label": "ğŸ“ Ligar agora",
              "kind": "call",
              "payload": "+5511999999999"
            }
          ]
        },
        "x": 400,
        "y": 800
      },
      {
        "id": "localizacao_mapa",
        "kind": "media",
        "title": "LocalizaÃ§Ã£o no Mapa",
        "props": {
          "type": "image",
          "url": "https://example.com/images/mapa-clinica.png",
          "caption": "ğŸ“ **Como chegar:**\n\nğŸš‡ MetrÃ´: EstaÃ§Ã£o RepÃºblica (Linha Vermelha)\nğŸšŒ Ã”nibus: Linhas 102, 205, 308\nğŸš— Estacionamento: DisponÃ­vel no local\n\nâ±ï¸ A clÃ­nica fica a 5 min da estaÃ§Ã£o de metrÃ´!"
        },
        "x": 700,
        "y": 800
      },
      {
        "id": "audio_instrucoes",
        "kind": "media",
        "title": "Ãudio com InstruÃ§Ãµes",
        "props": {
          "type": "audio",
          "url": "https://example.com/audio/instrucoes-chegada.ogg",
          "caption": "ğŸ§ OuÃ§a as instruÃ§Ãµes detalhadas de como chegar:"
        },
        "x": 700,
        "y": 950
      },
      {
        "id": "despedida_sticker",
        "kind": "media",
        "title": "Despedida",
        "props": {
          "type": "sticker",
          "url": "https://example.com/stickers/obrigado.webp"
        },
        "x": 1000,
        "y": 500
      },
      {
        "id": "finalizar_atendimento",
        "kind": "message",
        "title": "FinalizaÃ§Ã£o",
        "props": {
          "text": "Obrigado por escolher a {{props.clinica_nome}}! ğŸ™\n\nSe precisar de mais alguma coisa, estarei aqui para ajudar.\n\nğŸ’™ Cuide bem da sua saÃºde!"
        },
        "x": 1000,
        "y": 600,
        "final": true
      },
      {
        "id": "video_apresentacao",
        "kind": "media",
        "title": "VÃ­deo Institucional",
        "props": {
          "type": "video",
          "url": "https://example.com/videos/clinica-apresentacao.mp4",
          "caption": "ğŸ¥ ConheÃ§a nossa estrutura e equipe mÃ©dica especializada!"
        },
        "x": 400,
        "y": 1000
      }
    ],
    "edges": [
      {
        "from": "boas_vindas_hsm",
        "to": "apresentacao_imagem",
        "label": "inÃ­cio"
      },
      {
        "from": "apresentacao_imagem",
        "to": "menu_principal",
        "label": "continuar"
      },
      {
        "from": "menu_principal",
        "to": "especialidades_lista",
        "label": "agendar",
        "guard": "payload == 'agendar'"
      },
      {
        "from": "menu_principal",
        "to": "meus_agendamentos", 
        "label": "agendamentos",
        "guard": "payload == 'agendamentos'"
      },
      {
        "from": "menu_principal",
        "to": "carousel_planos",
        "label": "planos",
        "guard": "payload == 'planos'"
      },
      {
        "from": "menu_principal",
        "to": "informacoes_clinica",
        "label": "informaÃ§Ãµes",
        "guard": "payload == 'informacoes'"
      },
      {
        "from": "especialidades_lista",
        "to": "agendamento_confirmacao",
        "label": "especialidade_selecionada"
      },
      {
        "from": "agendamento_confirmacao",
        "to": "comprovante_documento",
        "label": "confirmar",
        "guard": "payload == 'yes'"
      },
      {
        "from": "agendamento_confirmacao",
        "to": "menu_principal",
        "label": "cancelar",
        "guard": "payload == 'no'"
      },
      {
        "from": "comprovante_documento",
        "to": "despedida_sticker",
        "label": "finalizar"
      },
      {
        "from": "meus_agendamentos",
        "to": "despedida_sticker",
        "label": "finalizar"
      },
      {
        "from": "carousel_planos",
        "to": "despedida_sticker",
        "label": "finalizar"
      },
      {
        "from": "informacoes_clinica",
        "to": "localizacao_mapa",
        "label": "localizaÃ§Ã£o",
        "guard": "payload == 'localizacao'"
      },
      {
        "from": "informacoes_clinica",
        "to": "video_apresentacao",
        "label": "vÃ­deo"
      },
      {
        "from": "localizacao_mapa",
        "to": "audio_instrucoes",
        "label": "detalhes"
      },
      {
        "from": "audio_instrucoes",
        "to": "despedida_sticker",
        "label": "finalizar"
      },
      {
        "from": "video_apresentacao",
        "to": "despedida_sticker",
        "label": "finalizar"
      },
      {
        "from": "despedida_sticker",
        "to": "finalizar_atendimento",
        "label": "fim"
      }
    ]
  }
}